<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆ</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .transition {
      transition: transform 0.2s ease, color 0.2s ease;
    }
    .bg-question1 {
      background-image: url('https://image.co-trip.jp/content/14renewal_images_l/687519/main_image_20250411121542108.jpg');
      background-size: cover;
      background-position: center;
    }
    .bg-question2 {
      background-image: url('https://tabiyomi.yomiuri-ryokou.co.jp/uploads/2024/12/10/c61fd26459e36c4633136fbf760a4d832c059671.jpg');
      background-size: cover;
      background-position: center;
    }
    .bg-question3 {
      background-image: url('https://prtimes.jp/i/23462/409/resize/d23462-409-b6f0f90c18c4ad6c39a0-0.jpg');
      background-size: cover;
      background-position: center;
    }
    .bg-question4 {
      background-image: url('');
      background-size: cover;
      background-position: center;
    }
    .bg-question5 {
      background-image: url('');
      background-size: cover;
      background-position: center;
    }
  </style>
</head>
<body class="bg-gray-100 text-gray-800 p-4 sm:p-8">

  <div class="max-w-3xl mx-auto bg-white p-6 sm:p-10 rounded-xl shadow-md">
    <h1 class="text-2xl sm:text-3xl font-bold mb-6 text-center">ã‚¢</h1>
    <form id="surveyForm" class="space-y-6">

      <!-- è³ªå•ã‚«ãƒ¼ãƒ‰ï¼ˆèƒŒæ™¯ä»˜ãï¼‰ -->
      <div class="p-6 rounded-xl shadow bg-question1 bg-opacity-10 backdrop-blur-sm border border-gray-300 rating-group" data-question="q1">
        <p class="mb-4 font-semibold text-lg bg-white bg-opacity-70 p-2 rounded text-center">ä¸‡åš</p>
        <div class="flex justify-between sm:justify-around">
          <label class="rating-icon cursor-pointer text-2xl transition" data-value="1">ğŸ˜¡</label>
          <label class="rating-icon cursor-pointer text-2xl transition" data-value="2">ğŸ˜•</label>
          <label class="rating-icon cursor-pointer text-2xl transition" data-value="3">ğŸ˜</label>
          <label class="rating-icon cursor-pointer text-2xl transition" data-value="4">ğŸ™‚</label>
          <label class="rating-icon cursor-pointer text-2xl transition" data-value="5">ğŸ˜</label>
        </div>
        <input type="hidden" name="q1" />
      </div>

      <div class="p-6 rounded-xl shadow bg-question2 bg-opacity-10 backdrop-blur-sm border border-gray-300 rating-group" data-question="q2">
        <p class="mb-4 font-semibold text-lg bg-white bg-opacity-70 p-2 rounded text-center">ä¼Šå‹¢ç¥å®®</p>
        <div class="flex justify-between sm:justify-around">
          <label class="rating-icon cursor-pointer text-2xl transition" data-value="1">ğŸ˜¡</label>
          <label class="rating-icon cursor-pointer text-2xl transition" data-value="2">ğŸ˜•</label>
          <label class="rating-icon cursor-pointer text-2xl transition" data-value="3">ğŸ˜</label>
          <label class="rating-icon cursor-pointer text-2xl transition" data-value="4">ğŸ™‚</label>
          <label class="rating-icon cursor-pointer text-2xl transition" data-value="5">ğŸ˜</label>
        </div>
        <input type="hidden" name="q2" />
      </div>

      <div class="p-6 rounded-xl shadow bg-question3 bg-opacity-10 backdrop-blur-sm border border-gray-300 rating-group" data-question="q3">
        <p class="mb-4 font-semibold text-lg bg-white bg-opacity-70 p-2 rounded text-center">ãƒã‚¦ã‚¹ãƒ†ãƒ³ãƒœã‚¹</p>
        <div class="flex justify-between sm:justify-around">
          <label class="rating-icon cursor-pointer text-2xl transition" data-value="1">ğŸ˜¡</label>
          <label class="rating-icon cursor-pointer text-2xl transition" data-value="2">ğŸ˜•</label>
          <label class="rating-icon cursor-pointer text-2xl transition" data-value="3">ğŸ˜</label>
          <label class="rating-icon cursor-pointer text-2xl transition" data-value="4">ğŸ™‚</label>
          <label class="rating-icon cursor-pointer text-2xl transition" data-value="5">ğŸ˜</label>
        </div>
        <input type="hidden" name="q3" />
      </div>

      <div class="p-6 rounded-xl shadow bg-question4 bg-opacity-10 backdrop-blur-sm border border-gray-300 rating-group" data-question="q4">
        <p class="mb-4 font-semibold text-lg bg-white bg-opacity-70 p-2 rounded text-center"></p>
        <div class="flex justify-between sm:justify-around">
          <label class="rating-icon cursor-pointer text-2xl transition" data-value="1">ğŸ˜¡</label>
          <label class="rating-icon cursor-pointer text-2xl transition" data-value="2">ğŸ˜•</label>
          <label class="rating-icon cursor-pointer text-2xl transition" data-value="3">ğŸ˜</label>
          <label class="rating-icon cursor-pointer text-2xl transition" data-value="4">ğŸ™‚</label>
          <label class="rating-icon cursor-pointer text-2xl transition" data-value="5">ğŸ˜</label>
        </div>
        <input type="hidden" name="q4" />
      </div>

      <div class="p-6 rounded-xl shadow bg-question5 bg-opacity-10 backdrop-blur-sm border border-gray-300 rating-group" data-question="q5">
        <p class="mb-4 font-semibold text-lg bg-white bg-opacity-70 p-2 rounded text-center"></p>
        <div class="flex justify-between sm:justify-around">
          <label class="rating-icon cursor-pointer text-2xl transition" data-value="1">ğŸ˜¡</label>
          <label class="rating-icon cursor-pointer text-2xl transition" data-value="2">ğŸ˜•</label>
          <label class="rating-icon cursor-pointer text-2xl transition" data-value="3">ğŸ˜</label>
          <label class="rating-icon cursor-pointer text-2xl transition" data-value="4">ğŸ™‚</label>
          <label class="rating-icon cursor-pointer text-2xl transition" data-value="5">ğŸ˜</label>
        </div>
        <input type="hidden" name="q5" />
      </div>

      <!-- ä»–ã®è³ªå•ã‚‚åŒã˜ã‚ˆã†ã«è¿½åŠ  -->

      <div class="text-center">
        <button type="submit" class="bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700">é€ä¿¡</button>
      </div>
    </form>

    <!-- çµæœè¡¨ç¤º -->
    <div id="result" class="mt-6 hidden bg-green-100 text-green-800 p-4 rounded text-center">
      ã”å›ç­”ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸï¼
    </div>
  </div>

  <!-- JavaScript -->
  <script>
    document.querySelectorAll('.rating-group').forEach(group => {
      const icons = group.querySelectorAll('.rating-icon');
      const input = group.querySelector('input[type="hidden"]');

      icons.forEach(icon => {
        icon.addEventListener('click', () => {
          // å…¨ã¦ãƒªã‚»ãƒƒãƒˆ
          icons.forEach(i => i.classList.remove('text-yellow-500', 'scale-125'));

          // é¸ã°ã‚ŒãŸã‚¢ã‚¤ã‚³ãƒ³ã«ã‚¹ã‚¿ã‚¤ãƒ«è¿½åŠ 
          icon.classList.add('text-yellow-500', 'scale-125');

          // å€¤ã‚’è¨­å®šï¼ˆã“ã“ãŒé‡è¦ï¼ï¼‰
          input.value = icon.dataset.value;

          // èµ¤ã„ãƒã‚¤ãƒ©ã‚¤ãƒˆãŒã‚ã‚Œã°å‰Šé™¤ï¼ˆæœªå›ç­”ã‚¨ãƒ©ãƒ¼ã®è§£é™¤ï¼‰
          group.classList.remove('ring-4', 'ring-red-400');
        });
      });
    });

    // ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†ï¼ˆGoogleãƒ•ã‚©ãƒ¼ãƒ é€£æºç”¨ã«å¤‰æ›´å¯èƒ½ï¼‰
    document.getElementById('surveyForm').addEventListener('submit', function(e) {
  e.preventDefault();

    const formData = new FormData(this);
    const data = {};
    let valid = true; // æœªå›ç­”ãƒã‚§ãƒƒã‚¯ç”¨

    // ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼šæœªå…¥åŠ›ã®è³ªå•ãŒã‚ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
    const questions = document.querySelectorAll('.rating-group');
    questions.forEach(group => {
      const input = group.querySelector('input[type="hidden"]');
      const questionName = input.name;

      if (!input.value) {
        valid = false;

        // è¦–è¦šçš„ã«æœªå›ç­”ç®‡æ‰€ã‚’ãƒã‚¤ãƒ©ã‚¤ãƒˆ
        group.classList.add('ring-4', 'ring-red-400');
      } else {
        group.classList.remove('ring-4', 'ring-red-400');
        data[questionName] = input.value;
      }
    });

    if (!valid) {
      return;
    }

    // Google Apps Script ã«é€ä¿¡
    fetch('https://script.google.com/macros/s/AKfycbwFGHNuo9gEdYeJX7a2omUmT5Y0a-aYy9y1Td2lI3pjVojaHaKtnRa7Skaa2xzOJ0cw/exec', {
      method: 'POST',
      mode: 'no-cors',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify(data),
    });

    // ã‚µãƒ³ã‚¯ã‚¹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
    document.getElementById('result').classList.remove('hidden');

    // ãƒ•ã‚©ãƒ¼ãƒ ã‚’åˆæœŸåŒ–
    this.reset();

    // hiddenå…¥åŠ›ã¨ã‚¢ã‚¤ã‚³ãƒ³ã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’ãƒªã‚»ãƒƒãƒˆ
    questions.forEach(group => {
      const input = group.querySelector('input[type="hidden"]');
      input.value = ""; // hiddenãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’æ˜ç¤ºçš„ã«ã‚¯ãƒªã‚¢

      const icons = group.querySelectorAll('.rating-icon');
      icons.forEach(icon => {
        icon.classList.remove('text-yellow-500', 'scale-125');
      });

      group.classList.remove('ring-4', 'ring-red-400');
    });
  });

  </script>
</body>
</html>
